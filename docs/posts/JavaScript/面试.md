# 面试

## 防抖、节流

1. 防抖：

* 在时间出发n秒后再执行回调，如果在这n秒以内又被触发了，则重新计时
* 适用场景：
  * 按钮的提交：防止重复提交
  * 搜索框检索，防止频繁调用接口影响体验和对服务器造成压力

```js
const debounce = (func, wait) => {
  let timeout
  return function () {
    const context = this
    const args = arguments
    clearTimeout(timeout)
    timeout = setTimeout(() => {
      func.apply(context, args)
    }, wait)
  }
}

const debounce = (func, wait, immediate) => {
  let timeout
  return function () {
    const context = this
    const args = arguments
    if (immediate) {
      const callNow = !timeout
      timeout = setTimeout (() => {
        timeout = null
      })
      if (callNow) fn.apply(this, args)
    } else {
      timeout = setTimeout(() => {
        func.apply(context, args)
      }, wait)
    }
  }
}
```

2. 节流：

* 规定在一个时间内，只能触发一次函数，如果这个时间内多次触发，只生效一次
* 适用场景：
  * 拖拽场景：防止dom大量的重拍影响性能
  * 缩放场景：频繁触发resize，性能

```js
const throttle = (fn, wait) => {
  let timeout
  return function () {
    const context = this
    const args = arguments
    if (!timeout) {
      timeout = setTimeout(() => {
        timeout = null
        fn.apply(context, args)
      })
    }
  }
}
```

## 闭包

1. 什么是闭包

函数执行后返回结果是一个内部函数，并被外部变量所引用，如果内部函数持有被执行函数作用域的变量，既形成闭包

2. 闭包原理

函数执行分成两个阶段(预编译阶段和执行阶段)。

* 在预编译阶段，如果发现内部函数使用了外部函数的变量，则会在内存中创建一个“闭包”对象并保存对应变量值，如果已存在“闭包”，则只需要增加对应属性值即可。
* 执行完后，函数执行上下文会被销毁，函数对“闭包”对象的引用也会被销毁，但其内部函数还持用该“闭包”的引用，所以内部函数可以继续使用“外部函数”中的变量

利用了函数作用域链的特性，一个函数内部定义的函数会将包含外部函数的活动对象添加到它的作用域链中，函数执行完毕，其执行作用域链销毁，但因内部函数的作用域链仍然在引用这个活动对象，所以其活动对象不会被销毁，直到内部函数被烧毁后才被销毁。

3. 优点

* 3.1. 可以从内部函数访问外部函数的作用域中的变量，且访问到的变量长期在内存中，可以使用
* 3.2. 避免变量全局污染
* 3.3. 把变量储存在独立的作用域，作为私有成员存在

4. 缺点

* 4.1. 内存泄漏
* 4.2. 对速度的影响，内部的层级决定了引用的外部变量在查找时经过的作用链长度
* 4.3. 可能获取意外值

5. 使用场景

* 5.1 模块封装

```js
var fn = (function () {
  var foo = 0
  function func () {}
  fn.prototype.bar = function () {
    return foo
  }
  return func
})
```

* 5.2 循环中使用

```js
for (var i = 0;  i < 3; i++) {
  (function (j) {
    setTimeout(() => {
      console.log(j)
    }, 0)
  })(i)
}
```

## 写一个mySetInterVal(fn, a, b),每次间隔 a,a+b,a+2b,...,a+nb 的时间，执行一次fn，然后写一个 myClear，停止上面的 mySetInterVal

::: details 查看演示代码
<<< @/docs/.vuepress/public/demo/js/mySetInterVal.js
:::

## 实现 lodash 的_.get

## 实现 add(1)(2)(3)

## 实现链式调用

## 类数组和数组的区别，dom 的类数组如何转换成数组

## 介绍下 promise 的特性、优缺点，内部是如何实现的，动手实现 Promise

## 手写发布订阅

## 手写数组转树

## 手写用 ES6proxy 如何实现 arr[-1] 的访问

## 手写实现 Array.flat()

## 大数计算如何实现

## 什么是深拷贝，和浅拷贝有什么区别，动手实现一个深拷贝

## 实现一个方法判断 html 中的标签是否闭合

## 箭头函数和普通函数的区别

## es5 实现 isInteger

## 手写 dom 操作，翻转 li 标签，如何处理更优

```html
/*
 *有下边这样的dom结构，现在可以获取到ul，要求翻转里边li标签，如何处理更优
 */
<ul>
  <li>1</li>
  <li>2</li>
  <li>3</li>
</ul>
```

## 样判断一个对象是否是数组，如何处理类数组对象

## 是否了解 glob，glob 是如何处理文件的，业界是否还有其它解决方案

## 随便打开一个网页，用 JavaScript 打印所有以 s 和 h 开头的标签，并计算出标签的种类

## 1000*1000 的画布，上面有飞机、子弹，如何划分区域能够更有效的做碰撞检测，类似划分区域大小与碰撞检测效率的算法，说一下大致的思路

## 移动设备安卓与 iOS 的软键盘弹出的处理方式有什么不同

## iPhone 里面 Safari 上如果一个输入框 fixed 绝对定位在底部，当软键盘弹出的时候会有什么问题，如何解决

## 给定一个数组，按找到每个元素右侧第一个比它大的数字，没有的话返回-1 规则返回一个数组

## 说一说 promise，有几个状态，通过 catch 捕获到 reject 之后，在 catch 后面还能继续执行 then 方法嘛，如果能执行执行的是第几个回调函数

## 如何实现按需加载

## 讲一下 import 的原理，与 require 有什么不同

## 说一下 GC

## 是否用过 restful 接口，和其他风格的有什么区别

## 说一下 get、post、put 的区别

## 说一下对面向对象的理解，面向对象有什么好处

## 类设计：使用面相对象设计一个停车场管理系

## 手写代码实现kuai-shou-front-end=>KuaiShouFrontEnd

## 实现 Promise.then

## 用尽量短的代码实现一个 arrary 的链式操作，将数组中的大于 10 的值进行一个累加
